import 'dotenv/config';
import { Agent } from '@playground/sdk';
import { botsRouter } from './bots.js'';

async function main() {
  const agent = new Agent({
    nodeId: process.env.AGENT_ID ?? "{{.NodeID}}",
    playgroundUrl: process.env.AGENTS_URL ?? 'http://localhost:8080',
    port: Number(process.env.PORT ?? 8001),
    version: '1.0.0',
    devMode: true,

    // ðŸ”§ Uncomment to enable AI features:
    // aiConfig: {
    //   provider: 'openai',            // or 'anthropic'
    //   model: 'gpt-4o',
    //   apiKey: process.env.OPENAI_API_KEY, // or OPENROUTER_API_KEY for OpenRouter
    //   // baseUrl: 'https://openrouter.ai/api/v1',
    //   // temperature: 0.7,
    //   // maxTokens: 4096
    // },
  });

  agent.includeRouter(botsRouter);

  await agent.serve();
  // eslint-disable-next-line no-console
  console.log(`Agent "${agent.config.nodeId}" listening on http://localhost:${agent.config.port}`);
}

if (import.meta.url === `file://${process.argv[1]}`) {
  main().catch((err) => {
    // eslint-disable-next-line no-console
    console.error(err);
    process.exit(1);
  });
}
